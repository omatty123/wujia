<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ÂõõÂ§ßÂì≤Â≠¶ÊµÅÊ¥æ Matrix</title>
  <style>
    * {margin:0; padding:0; box-sizing:border-box;}
    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg,#1a1a2e,#16213e);
      color:#e8e8e8;
      padding:20px;
      min-height:100vh;
    }
    h1 {
      text-align:center;
      font-size:2.4em;
      margin-bottom:10px;
      background:linear-gradient(45deg,#d4af37,#f4e4c1);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .subtitle {text-align:center; font-style:italic; color:#aaa; margin-bottom:20px;}
    .container {
      display:grid;
      grid-template-columns: 70% 30%;
      gap:20px;
    }
    @media(max-width:768px){
      .container{grid-template-columns:1fr;}
    }
    .table-wrapper {
      overflow-x:auto;
      background:rgba(255,255,255,0.03);
      border-radius:12px;
      padding:15px;
      border:1px solid rgba(255,255,255,0.1);
    }
    table {
      width:100%;
      border-collapse:collapse;
    }
    th,td {padding:12px; border:1px solid rgba(255,255,255,0.1);}
    th {background:rgba(255,255,255,0.05); font-size:1.1em; text-align:center;}
    td:first-child {font-weight:bold; color:#d4af37; width:160px;}
    .dropzone {
      min-height:80px;
      border:2px dashed rgba(255,255,255,0.2);
      border-radius:8px;
      padding:5px;
    }
    .items-bank {
      background:rgba(255,255,255,0.03);
      border-radius:12px;
      padding:15px;
      border:1px solid rgba(255,255,255,0.1);
      max-height:80vh;
      overflow-y:auto;
    }
    .category{margin-bottom:20px;}
    .category h3{text-align:center; margin-bottom:10px; color:#d4af37;}
    .draggable {
      background:rgba(255,255,255,0.1);
      border-radius:6px;
      padding:8px;
      margin:5px 0;
      cursor:grab;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .draggable:hover{background:rgba(255,255,255,0.2);}
    .draggable.selected{outline:2px solid #d4af37;}
    .speaker {
      background:none; border:none; color:#d4af37; cursor:pointer;
    }
    .check-button, .reset-button {
      margin:10px auto; display:block;
      padding:10px 20px; border:none; border-radius:6px;
      background:#d4af37; color:#1a1a2e; font-weight:bold; cursor:pointer;
    }
    .check-button:hover,.reset-button:hover{background:#f4e4c1;}
    .correct {background:rgba(80,200,120,0.3)!important;}
    .incorrect {background:rgba(231,76,60,0.3)!important;}
  </style>
</head>
<body>
  <h1>ÂõõÂ§ßÂì≤Â≠¶ÊµÅÊ¥æ</h1>
  <p class="subtitle">Ru Jia ‚Ä¢ Dao Jia ‚Ä¢ Mo Jia ‚Ä¢ Fa Jia</p>
  <div class="container">
    <div class="matrix-section">
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th></th>
              <th>ÂÑíÂÆ∂ Ru Jia</th>
              <th>ÈÅìÂÆ∂ Dao Jia</th>
              <th>Â¢®ÂÆ∂ Mo Jia</th>
              <th>Ê≥ïÂÆ∂ Fa Jia</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Key People</td>
              <td class="dropzone" data-cat="people" data-school="ru"></td>
              <td class="dropzone" data-cat="people" data-school="dao"></td>
              <td class="dropzone" data-cat="people" data-school="mo"></td>
              <td class="dropzone" data-cat="people" data-school="fa"></td>
            </tr>
            <tr><td>Key Concepts</td>
              <td class="dropzone" data-cat="concepts" data-school="ru"></td>
              <td class="dropzone" data-cat="concepts" data-school="dao"></td>
              <td class="dropzone" data-cat="concepts" data-school="mo"></td>
              <td class="dropzone" data-cat="concepts" data-school="fa"></td>
            </tr>
            <tr><td>Aphorisms</td>
              <td class="dropzone" data-cat="aphorisms" data-school="ru"></td>
              <td class="dropzone" data-cat="aphorisms" data-school="dao"></td>
              <td class="dropzone" data-cat="aphorisms" data-school="mo"></td>
              <td class="dropzone" data-cat="aphorisms" data-school="fa"></td>
            </tr>
            <tr><td>Applications</td>
              <td class="dropzone" data-cat="applications" data-school="ru"></td>
              <td class="dropzone" data-cat="applications" data-school="dao"></td>
              <td class="dropzone" data-cat="applications" data-school="mo"></td>
              <td class="dropzone" data-cat="applications" data-school="fa"></td>
            </tr>
          </tbody>
        </table>
      </div>
      <button class="check-button" onclick="checkAnswers()">Check Answers</button>
      <button class="reset-button" onclick="resetBoard()">Reset</button>
    </div>
    <div class="items-bank" id="items-bank">
      <div class="category"><h3>Answer Bank</h3></div>
    </div>
  </div>

  <script>
    const tokens = [
      // People
      {id:"kongzi", text:"Kongzi (Â≠îÂ≠ê)", pronounce:"Â≠îÂ≠ê", correct:"ru", cat:"people"},
      {id:"mengzi", text:"Mengzi (Â≠üÂ≠ê)", pronounce:"Â≠üÂ≠ê", correct:"ru", cat:"people"},
      {id:"xunzi", text:"Xunzi (ËçÄÂ≠ê)", pronounce:"ËçÄÂ≠ê", correct:"ru", cat:"people"},
      {id:"laozi", text:"Laozi (ËÄÅÂ≠ê)", pronounce:"ËÄÅÂ≠ê", correct:"dao", cat:"people"},
      {id:"zhuangzi", text:"Zhuangzi (Â∫ÑÂ≠ê)", pronounce:"Â∫ÑÂ≠ê", correct:"dao", cat:"people"},
      {id:"mozi", text:"Mozi (Â¢®Â≠ê)", pronounce:"Â¢®Â≠ê", correct:"mo", cat:"people"},
      {id:"hanfeizi", text:"Han Feizi (Èü©ÈùûÂ≠ê)", pronounce:"Èü©ÈùûÂ≠ê", correct:"fa", cat:"people"},
      {id:"shangyang", text:"Shang Yang (ÂïÜÈûÖ)", pronounce:"ÂïÜÈûÖ", correct:"fa", cat:"people"},
      {id:"people", text:"The People (Ê∞ë)", pronounce:"Ê∞ë", correct:"mo", cat:"people"},
      // Concepts Ru
      {id:"ren", text:"Ren ‰ªÅ - Benevolence", pronounce:"‰ªÅ", correct:"ru", cat:"concepts"},
      {id:"li", text:"Li Á§º - Ritual", pronounce:"Á§º", correct:"ru", cat:"concepts"},
      {id:"yi", text:"Yi ‰πâ - Righteousness", pronounce:"‰πâ", correct:"ru", cat:"concepts"},
      {id:"xiao", text:"Xiao Â≠ù - Filial Piety", pronounce:"Â≠ù", correct:"ru", cat:"concepts"},
      {id:"junzi", text:"Junzi ÂêõÂ≠ê - Exemplary Person", pronounce:"ÂêõÂ≠ê", correct:"ru", cat:"concepts"},
      // Concepts Dao
      {id:"dao", text:"Dao ÈÅì - The Way", pronounce:"ÈÅì", correct:"dao", cat:"concepts"},
      {id:"wuwei", text:"Wu Wei Êó†‰∏∫ - Non-action", pronounce:"Êó†‰∏∫", correct:"dao", cat:"concepts"},
      {id:"ziran", text:"Ziran Ëá™ÁÑ∂ - Naturalness", pronounce:"Ëá™ÁÑ∂", correct:"dao", cat:"concepts"},
      {id:"yinyang", text:"Yin-Yang Èò¥Èò≥ - Opposites", pronounce:"Èò¥Èò≥", correct:"dao", cat:"concepts"},
      {id:"pu", text:"Pu Êú¥ - The Uncarved Block", pronounce:"Êú¥", correct:"dao", cat:"concepts"},
      // Concepts Mo
      {id:"jianai", text:"Jian Ai ÂÖºÁà± - Universal Love", pronounce:"ÂÖºÁà±", correct:"mo", cat:"concepts"},
      {id:"feigong", text:"Fei Gong ÈùûÊîª - Against War", pronounce:"ÈùûÊîª", correct:"mo", cat:"concepts"},
      {id:"shangxian", text:"Shang Xian Â∞öË¥§ - Meritocracy", pronounce:"Â∞öË¥§", correct:"mo", cat:"concepts"},
      {id:"jieyong", text:"Jie Yong ËäÇÁî® - Moderation", pronounce:"ËäÇÁî®", correct:"mo", cat:"concepts"},
      {id:"tianzhi", text:"Tianzhi Â§©Âøó - Will of Heaven", pronounce:"Â§©Âøó", correct:"mo", cat:"concepts"},
      // Concepts Fa
      {id:"fa", text:"Fa Ê≥ï - Law", pronounce:"Ê≥ï", correct:"fa", cat:"concepts"},
      {id:"shu", text:"Shu ÊúØ - Techniques", pronounce:"ÊúØ", correct:"fa", cat:"concepts"},
      {id:"shi", text:"Shi Âäø - Authority", pronounce:"Âäø", correct:"fa", cat:"concepts"},
      {id:"centralization", text:"Centralization", pronounce:"", correct:"fa", cat:"concepts"},
      {id:"realism", text:"Realism", pronounce:"", correct:"fa", cat:"concepts"},
      // Aphorisms Ru
      {id:"ru1", text:"Do not impose on others what you do not desire.", pronounce:"", correct:"ru", cat:"aphorisms"},
      {id:"ru2", text:"The gentleman understands what is moral. The small man what is profitable.", pronounce:"", correct:"ru", cat:"aphorisms"},
      {id:"ru3", text:"Learning without thought is labor lost; thought without learning is perilous.", pronounce:"", correct:"ru", cat:"aphorisms"},
      // Aphorisms Dao
      {id:"dao1", text:"The Useless Tree", pronounce:"", correct:"dao", cat:"aphorisms"},
      {id:"dao2", text:"Butterfly Dream", pronounce:"", correct:"dao", cat:"aphorisms"},
      {id:"dao3", text:"The greatest carver does the least cutting.", pronounce:"", correct:"dao", cat:"aphorisms"},
      // Aphorisms Mo
      {id:"mo1", text:"If everyone cared for others' families, who would cause disorder?", pronounce:"", correct:"mo", cat:"aphorisms"},
      {id:"mo2", text:"Elaborate funerals waste resources better spent on the poor.", pronounce:"", correct:"mo", cat:"aphorisms"},
      {id:"mo3", text:"To kill one innocent is murder; to kill ten is ten crimes.", pronounce:"", correct:"mo", cat:"aphorisms"},
      // Aphorisms Fa
      {id:"fa1", text:"When the epoch changed, the measures of government changed.", pronounce:"", correct:"fa", cat:"aphorisms"},
      {id:"fa2", text:"The ruler controls ministers with punishment and favor.", pronounce:"", correct:"fa", cat:"aphorisms"},
      {id:"fa3", text:"In the state of an enlightened ruler, law is the only instruction.", pronounce:"", correct:"fa", cat:"aphorisms"},
      // Applications Ru
      {id:"ru-app1", text:"Business Ethics", pronounce:"", correct:"ru", cat:"applications"},
      {id:"ru-app2", text:"Education", pronounce:"", correct:"ru", cat:"applications"},
      {id:"ru-app3", text:"Leadership", pronounce:"", correct:"ru", cat:"applications"},
      // Applications Dao
      {id:"dao-app1", text:"Systems Thinking", pronounce:"", correct:"dao", cat:"applications"},
      {id:"dao-app2", text:"Mindfulness & Flow", pronounce:"", correct:"dao", cat:"applications"},
      {id:"dao-app3", text:"Sustainability", pronounce:"", correct:"dao", cat:"applications"},
      // Applications Mo
      {id:"mo-app1", text:"Effective Altruism", pronounce:"", correct:"mo", cat:"applications"},
      {id:"mo-app2", text:"Peace Studies", pronounce:"", correct:"mo", cat:"applications"},
      {id:"mo-app3", text:"Meritocracy", pronounce:"", correct:"mo", cat:"applications"},
      // Applications Fa
      {id:"fa-app1", text:"Institutional Design", pronounce:"", correct:"fa", cat:"applications"},
      {id:"fa-app2", text:"Behavioral Economics", pronounce:"", correct:"fa", cat:"applications"},
      {id:"fa-app3", text:"Management Science", pronounce:"", correct:"fa", cat:"applications"},
    ];

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]]=[arr[j],arr[i]];
      }
    }

    function renderBank(){
      const bank=document.getElementById('items-bank');
      bank.innerHTML='<div class="category"><h3>Answer Bank</h3></div>';
      let arr=[...tokens];
      shuffle(arr);
      arr.forEach(tok=>{
        const div=document.createElement('div');
        div.className='draggable';
        div.draggable=true;
        div.dataset.id=tok.id;
        div.dataset.correct=tok.correct;
        div.dataset.cat=tok.cat;
        div.innerHTML=(tok.pronounce?`<button class="speaker" data-pronounce="${tok.pronounce}">üîä</button>`:"")+tok.text;
        bank.appendChild(div);
      });
      addDragListeners();
    }

    let draggedElement=null;
    let selectedToken=null;

    function addDragListeners(){
      document.querySelectorAll('.draggable').forEach(el=>{
        el.addEventListener('dragstart',e=>{
          draggedElement=el;
          e.dataTransfer.setData('text/plain',el.dataset.id);
        });
        // mobile tap fallback
        el.addEventListener('click',()=>{
          if('ontouchstart' in window){
            if(selectedToken===el){el.classList.remove('selected');selectedToken=null;}
            else {document.querySelectorAll('.draggable').forEach(d=>d.classList.remove('selected')); el.classList.add('selected'); selectedToken=el;}
          }
        });
      });
    }

    document.querySelectorAll('.dropzone').forEach(zone=>{
      zone.addEventListener('dragover',e=>e.preventDefault());
      zone.addEventListener('drop',e=>{
        e.preventDefault();
        const id=e.dataTransfer.getData('text/plain');
        const element=document.querySelector(`[data-id="${id}"]`);
        if(element){zone.appendChild(element); element.classList.remove('selected');}
      });
      zone.addEventListener('click',()=>{
        if('ontouchstart' in window && selectedToken){
          zone.appendChild(selectedToken); selectedToken.classList.remove('selected'); selectedToken=null;
        }
      });
    });

    function checkAnswers(){
      document.querySelectorAll('.dropzone .draggable').forEach(item=>{
        const school=item.dataset.correct;
        const cat=item.dataset.cat;
        const parent=item.closest('.dropzone');
        if(parent.dataset.school===school && parent.dataset.cat===cat){
          item.classList.add('correct'); item.classList.remove('incorrect');
        } else {
          item.classList.add('incorrect'); item.classList.remove('correct');
        }
      });
    }
    function resetBoard(){renderBank(); document.querySelectorAll('.dropzone').forEach(z=>z.innerHTML="");}

    document.addEventListener('click',e=>{
      if(e.target.classList.contains('speaker')){
        const pronounce=e.target.dataset.pronounce;
        if('speechSynthesis' in window){
          const utter=new SpeechSynthesisUtterance(pronounce);
          utter.lang='zh-CN'; utter.rate=0.8;
          speechSynthesis.speak(utter);
        }
      }
    });

    document.addEventListener('DOMContentLoaded',renderBank);
  </script>
</body>
</html>
