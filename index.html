<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>å››å¤§å“²å­¦æµæ´¾ â€” Interactive Matrix</title>
<style>
  /* same CSS from previous message (already included) */
</style>
</head>
<body>
<div class="container">
  <h1>å››å¤§å“²å­¦æµæ´¾</h1>
  <div class="subtitle">The Four Great Philosophical Schools of Ancient China</div>
  <div class="instructions">Drag items into the matrix. You can move them anytime. Click ğŸ”Š to hear the Chinese.</div>

  <!-- MATRIX -->
  <div class="table-wrapper">
    <table>
      <thead>
        <tr>
          <th></th>
          <th class="ru-header">å„’å®¶ Confucianism</th>
          <th class="dao-header">é“å®¶ Daoism</th>
          <th class="mo-header">å¢¨å®¶ Mohism</th>
          <th class="fa-header">æ³•å®¶ Legalism</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Key People</td>
          <td class="dropzone tint-ru" data-category="Key People" data-school="å„’å®¶"></td>
          <td class="dropzone tint-dao" data-category="Key People" data-school="é“å®¶"></td>
          <td class="dropzone tint-mo"  data-category="Key People" data-school="å¢¨å®¶"></td>
          <td class="dropzone tint-fa"  data-category="Key People" data-school="æ³•å®¶"></td>
        </tr>
        <tr>
          <td>Key Concepts</td>
          <td class="dropzone tint-ru" data-category="Key Concepts" data-school="å„’å®¶"></td>
          <td class="dropzone tint-dao" data-category="Key Concepts" data-school="é“å®¶"></td>
          <td class="dropzone tint-mo"  data-category="Key Concepts" data-school="å¢¨å®¶"></td>
          <td class="dropzone tint-fa"  data-category="Key Concepts" data-school="æ³•å®¶"></td>
        </tr>
        <tr>
          <td>Key Aphorisms / Thought Experiments</td>
          <td class="dropzone tint-ru" data-category="Aphorisms" data-school="å„’å®¶"></td>
          <td class="dropzone tint-dao" data-category="Aphorisms" data-school="é“å®¶"></td>
          <td class="dropzone tint-mo"  data-category="Aphorisms" data-school="å¢¨å®¶"></td>
          <td class="dropzone tint-fa"  data-category="Aphorisms" data-school="æ³•å®¶"></td>
        </tr>
        <tr>
          <td>Contemporary Applications</td>
          <td class="dropzone tint-ru" data-category="Applications" data-school="å„’å®¶"></td>
          <td class="dropzone tint-dao" data-category="Applications" data-school="é“å®¶"></td>
          <td class="dropzone tint-mo"  data-category="Applications" data-school="å¢¨å®¶"></td>
          <td class="dropzone tint-fa"  data-category="Applications" data-school="æ³•å®¶"></td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="btnbar">
    <button class="btn" onclick="checkAnswers()">Check Answers</button>
    <button class="btn btn-ghost" onclick="resetBoard()">Reset</button>
  </div>

  <!-- BANK -->
  <div class="bank-wrapper">
    <div class="bank-title">Answer Bank</div>
    <div class="items-bank">
      <div class="category dropzone" id="key-people-bank" data-bank="Key People"><h3>Key People</h3></div>
      <div class="category dropzone" id="key-concepts-bank" data-bank="Key Concepts"><h3>Key Concepts</h3></div>
      <div class="category dropzone" id="key-aphorisms-bank" data-bank="Aphorisms"><h3>Key Aphorisms</h3></div>
      <div class="category dropzone" id="applications-bank" data-bank="Applications"><h3>Applications</h3></div>
    </div>
  </div>
</div>

<script>
/* ========== ITEMS & KEY (same as in last message, truncated for brevity) ========== */
/* (Paste all the arrays: keyPeopleItems, keyConceptsItems, aphorismItems, applicationItems, and answerKey exactly as I gave you.) */

/* ===== Shuffle Utility ===== */
function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]];}return arr}

/* ===== Render & DnD ===== */
function makeDraggable(item,home){
  const div=document.createElement("div");
  div.className="draggable";div.draggable=true;div.dataset.id=item.id;div.dataset.home=home;
  div.innerHTML=`<span>${item.text}</span>`+(item.pronounce?`<button class="speaker" data-pronounce="${item.pronounce}">ğŸ”Š</button>`:"");
  div.addEventListener("dragstart",e=>{e.dataTransfer.setData("text/plain",item.id)});
  return div;
}
function renderBank(items,id){const box=document.getElementById(id);shuffle(items).forEach(it=>box.appendChild(makeDraggable(it,id)))}

document.addEventListener("DOMContentLoaded",()=>{
  renderBank([...keyPeopleItems],"key-people-bank");
  renderBank([...keyConceptsItems],"key-concepts-bank");
  renderBank([...aphorismItems],"key-aphorisms-bank");
  renderBank([...applicationItems],"applications-bank");

  document.querySelectorAll(".dropzone").forEach(zone=>{
    zone.addEventListener("dragover",e=>{e.preventDefault();zone.classList.add("highlight")});
    zone.addEventListener("dragleave",()=>zone.classList.remove("highlight"));
    zone.addEventListener("drop",e=>{
      e.preventDefault();zone.classList.remove("highlight");
      const id=e.dataTransfer.getData("text/plain");
      const el=document.querySelector(`.draggable[data-id='${id}']`);
      if(el) zone.appendChild(el);
    });
  });

  document.body.addEventListener("click",e=>{
    if(e.target.classList.contains("speaker")){
      const txt=e.target.dataset.pronounce;
      const ut=new SpeechSynthesisUtterance(txt);ut.lang="zh-CN";
      speechSynthesis.speak(ut);
    }
  });
});

/* ===== Check ===== */
function checkAnswers(){
  document.querySelectorAll(".dropzone").forEach(zone=>{
    if(zone.dataset.school){
      const cat=zone.dataset.category, sch=zone.dataset.school;
      zone.querySelectorAll(".draggable").forEach(d=>{
        const ok=answerKey[cat][sch].includes(d.dataset.id);
        d.classList.remove("correct","incorrect");
        d.classList.add(ok?"correct":"incorrect");
      });
    }
  });
}

/* ===== Reset ===== */
function resetBoard(){
  document.querySelectorAll(".draggable").forEach(el=>{
    const home=el.dataset.home;
    document.getElementById(home).appendChild(el);
    el.classList.remove("correct","incorrect");
  });
}
</script>
</body>
</html>
